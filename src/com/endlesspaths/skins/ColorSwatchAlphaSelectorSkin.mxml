<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:ep="com.endlesspaths.components.*">
	<fx:Metadata>
		[HostComponent("com.endlesspaths.components.ColorSwatchAlphaSelector")]
	</fx:Metadata>
	
	<fx:Script><![CDATA[
		import flash.events.MouseEvent;
		
		private function alphaSlider_DataTipFormatter(val:Number):String {
			return String(Math.round(val * 100));
		}
		
		protected function toggleColorEditor_Init():void {
			toggleColorEditor.addEventListener(MouseEvent.CLICK, toggleColorEditor_Click);
		}
		
		private function toggleColorEditor_Click(event:MouseEvent):void {
			colorEditorPopup.popUpOpen = !colorEditorPopup.popUpOpen;
			colorEditor.setColorAndHue(hostComponent.selectedColor);
		}
	]]></fx:Script>
	
	<s:states>
		<s:State name="normal" />
		<s:State name="displaySwatches" />
		<s:State name="displayColorEditor" />
		<s:State name="disabled" />
	</s:states>	
	
	<s:layout>
		<s:BasicLayout />
	</s:layout>
	
	<s:Group>
		<s:layout>
			<s:VerticalLayout  paddingLeft="5" paddingRight="5" paddingTop="5" paddingBottom="5" gap="10" horizontalAlign="contentJustify"/>
		</s:layout>
		<s:Group>
			<s:layout>
				<s:HorizontalLayout />
			</s:layout>
			<s:Group id="colorSwatchPreview" width="40" height="40">
				<s:Rect width="100%" height="100%">
					<s:fill>
						<s:BitmapFill source="@Embed('/assets/transparent-pattern.png')" fillMode="repeat" />
					</s:fill>
				</s:Rect>
				<s:Rect width="100%" height="100%">
					<s:fill>
						<s:SolidColor color="{hostComponent.selectedColor}" alpha="{hostComponent.selectedAlpha}" />
					</s:fill>
					<s:stroke>
						<s:SolidColorStroke caps="none" color="#999999" joints="miter" miterLimit="4" weight="1"/>
					</s:stroke>
				</s:Rect>
			</s:Group>
			<s:DataGroup id="swatchList" itemRenderer="com.endlesspaths.skins.ColorSwatchItemRenderer" dataProvider="{hostComponent.colorSwatches}" rollOverColor="0xFFCC00">
				<s:layout>
					<s:HorizontalLayout />
				</s:layout>
			</s:DataGroup>
			<s:Group width="10" />
			<s:Group right="0">
				<s:Graphic id="toggleColorEditor" buttonMode="true" useHandCursor="true" initialize="toggleColorEditor_Init();">
					<s:BitmapImage source="@Embed(source='/assets/gear.png')" verticalCenter="0" horizontalCenter="0" />
				</s:Graphic>
				<ep:AutoPopUpAnchor id="colorEditorPopup" popUpPosition="below" left="-5" top="10" priority="100">
					<ep:CalloutPanel id="colorEditorPanel" height="250" width="280" skinClass="com.endlesspaths.skins.CalloutPanelBlackHUDSkin" arrowPosition="top">
						<ep:ColorSelector id="colorEditor" skinClass="com.endlesspaths.skins.ColorSelectorSkin" selectedColor="@{hostComponent.selectedColor}" width="100%" height="100%" />
					</ep:CalloutPanel>
				</ep:AutoPopUpAnchor>
			</s:Group>
		</s:Group>
		<s:Group visible="{!hostComponent.hideAlpha}">
			<s:layout>
				<s:HorizontalLayout />
			</s:layout>
			<s:Label text="Alpha" color="#FFFFFF" />
			<s:HSlider id="alphaSlider" width="100%" value="@{hostComponent.selectedAlpha}" dataTipFormatFunction="alphaSlider_DataTipFormatter" minimum="0" maximum="1.0" snapInterval="0.01" />
		</s:Group>
	</s:Group>
</s:Skin>
